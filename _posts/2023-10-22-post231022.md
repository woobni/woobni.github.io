---
title: (Web) Web Server와 WAS(Web Application Server)
date: 2023-10-22 07:30 +0900
lastmod: 2023-10-22 07:30 +0900
categories: [Web]
tags: [Web]
mermaid: true
math: true
---

# **Web server란?**

---

![Untitled](/assets/img/2023-10-22-post231022/Untitled.png)

- 웹 서버는 클라이언트(사용자)가 브라우저 주소창에 url을 입력하여 어떤 페이지를 요청하면, http 요청을 받아들여 HTML 문서와 같은 정적인 콘텐츠를 사용자에게 전달해주는 역할을 합니다.
    1. 단순히 저장된 웹 리소스들을 클라이언트로 전달하고, 클라이언트로부터 콘텐츠를 전달 받아 저장하거나 처리한다.
    2. 사용자로부터 동적인 요청이 들어왔을 때, 해당 요청을 웹 서버 자체적으로 처리하기 어렵기 때문에 WAS에게 요청함.
- 대표적인 웹 서버의 종류: Apache, Nginx, IIS(windows 전용 웹 서버)

# **WAS(Web Application Server)란?**

---

![Untitled](/assets/img/2023-10-22-post231022/Untitled%201.png)

- WAS 또한 웹 서버와 동일하게 HTTP 기반으로 동작합니다. 웹 서버가 할 수 있는 기능 대부분이 WAS에서도 처리가 가능하며, 비즈니스 로직(서버사이드 코드)을 처리할 수 있어 사용자에게 동적인 콘텐츠를 전달할 수 있습니다. 주로 데이터베이스 서버와 같이 수행됩니다.
- 즉, WAS의 주요 임무는 **동적인 요청을 받아 처리해 주는 서버**입니다.
- 대표적인 WAS의 종류: Tomcat, JBoss, Jeus, Web Sphere

> 웹 애플리케이션 서버(Web Application Server, 약자 WAS)는 웹 애플리케이션과 서버 환경을 만들어 동작시키는 기능을 제공하는 소프트웨어 프레임워크이다. 인터넷상에서 HTTP를 통해 사용자 컴퓨터나 장치에 애플리케이션을 수행해 주는 미들웨어(소프트웨어 엔진)으로 볼 수 있다. 웹 애플리케이션 서버는 동적 서버 콘텐츠를 수행하는 것으로 일반적인 웹 서버와 구별이 되며, 주로 데이터베이스 서버와 같이 수행된다. 한국에서는 일반적으로 ‘WAS’ 또는 ‘WAS S/W’로 통칭하고 있으며 공공기관에서는 ‘웹 응용 서버’로 사용되고, 영어권에서는 ‘Application Server’(약자 AS)로 불린다. - 위키백과
> 

# **차이점**

---

- 정리하면 기능적으로 동일한 영역도 있고 WAS가 웹 서버 기능의 많은 부분을 포함하여 수행하지만 사용의 ‘목적’이 다릅니다.
- 웹 서버는 정적인 데이터를 처리하는 서버입니다. 이미지나 단순 html 같은 정적인 리소스들을 전달하며, WAS만을 이용할 때보다 빠르고 안정적으로 기능을 수행합니다.
- 반면, WAS는 동적인 데이터를 위주로 처리하는 서버입니다. DB와 연결되어 사용자와 데이터를 주고 받고, 조작이 필요한 경우 WAS를 활용합니다.

# **효율적 사용**

---

- 정적인 콘텐츠만을 제공하는 웹사이트를 서버에 배포한다면 웹 서버만으로도 충분합니다.
- 그런데 동적인 콘텐츠를 제공하는 웹서비스 배포해야 할 때는 정적, 동적 요청 처리가 모두 가능한 WAS만을 사용해도 되지 않겠냐는 생각을 할 수도 있습니다. 하지만 WAS는 DB 조회 및 다양한 로직을 처리하는 데 집중해야 합니다. 따라서 단순한 정적 콘텐츠는 웹 서버에게 맡기고, 기능을 분리해 서버 부하를 방지해야 합니다.

- 만약 WAS가 정적 콘텐츠 요청까지 처리하게 된다면, 부하가 커지고 동적 콘텐츠 처리가 지연되면서 수행 속도가 느려집니다. 이에 따라 페이지 노출 시간이 늘어나는 문제가 발생하여 효율성이 크게 떨어지게 됩니다.
    - **비효율적인 웹 시스템 구성**
        
        ![Untitled](/assets/img/2023-10-22-post231022/Untitled%202.png)
        
    - **효율적인 웹 시스템 구성**
        
        ![Untitled](/assets/img/2023-10-22-post231022/Untitled%203.png)
        
- 위 그림과 같이 웹 서버를 앞단에 두고, WAS는 웹 서버가 처리하기 힘든 서버 사이드 코드의 로직 등을 수행하여 웹 서버와 함께 사용자에게 양질의 콘텐츠를 제공할 수 있습니다.

- 사람들이 많이 접속하는 대용량 WAS인 경우, 서버의 수가 여러 대일 수도 있습니다. 만약 사용 중 WAS에서 문제가 생겨 WAS를 재시작해야 하는 경우가 생긴다면 이때 앞단의 웹 서버에서 WAS를 사용하지 못하도록 요청을 차단합니다. 그다음 WAS를 재시작한다면, 사용자들은 WAS에 문제가 발생한지 모르고 이용할 수 있습니다.
- 이러한 처리를 ‘장애 극복 기능’이라고 합니다. 즉 규모가 커질수록 웹 서버와 웹앱 서버를 분리하는 것입니다. 그리고 자원을 이용하면서 효율성, 배포 및 유지 보수 편의성을 위해 대체로 분리하여 둡니다.
- 또한 리버스 프록시의 구조를 가져가며 서버 부하 방지와 보안적 효율을 얻을 수 있습니다.

# **참고) CGI**

---

- 웹 서버만으로도 분명 동적인 요청 처리가 가능합니다. 예를 들면 PHP의 경우 WAS 없이 아파치나 nginx만을 통해서 동적인 요청 처리가 가능합니다.
- 이걸 가능하게 해주는 게 CGI인데 웹 서버에 별도로 설정해 주어야 합니다. CGI는 이름 그대로 인터페이스로서, 웹 서버상에서 프로그램을 동작시키기 위한 방법을 정의한 프로그램(또는 스크립트)입니다.

- **CGI란 위에 설명해 놓았듯이 동적 콘텐츠를 제공하기 위해 웹 서버 내에 프로그래밍 기능이 들어가는 방식입니다.**
    - 즉, PHP, Perl, Python 등의 언어들은 CGI를 구현해놓았기 때문에, 아파치에서 다양한 언어로 짜인 각 프로그램을 실행할 수 있습니다. 예를 들어 아파치에 PHP 모듈을 설치했을 경우, 요청이 왔을 때 아파치는 HTTP 헤더를 분석하고 파싱하여 PHP로 파라미터를 넘겨줍니다. 그러면 PHP에서는 파라미터를 받아 응답할 HTML 문서를 만들어서 아파치에 전달합니다.
    - HTML 문서를 전달받은 아파치는 CSS, JS, img 등 정적인 자원들과 함께 브라우저로 반환해 줍니다. 하지만 이 역시 CGI 효율이 떨어지기 마련입니다. CGI만으로는 규모가 큰 웹서비스를 구현하기 사실상 어렵습니다(WAS의 반대 경우입니다).

- **이상적인 웹서비스 아키텍처**
    
    ![Untitled](/assets/img/2023-10-22-post231022/Untitled%204.png)
    
    - 많은 프로그래머들이 JAVA를 견고한 언어라고 평가하는 이유도 여기에 어느 정도 포함되어 있다고 생각합니다.
    - **자바 서블릿** 은 CGI를 사용하지 않습니다. 그래서 WAS에 대해 설명할 때 대표적으로 JAVA, 톰캣, 아파치로 예시를 들어줍니다. 가장 이상적인 WS + WAS의 사용으로 보입니다.
        - **자바 서블릿:** 클라이언트의 요청에 대해 동적으로 작동하는 웹 어플리케이션 컴포넌트